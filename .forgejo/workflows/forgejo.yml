steps:
  build:
    image: alpine
    # this step gets ran on "master" and "trunk" branch.
    # also runs on pull requests targeting these branch.
    when:
      branch: [ master ]
    commands: |
      # alpine uses build-base for dev utilies such as system headers, make etc.
      apk add --no-cache build-base gcc >/dev/null
      apk add --no-cache build-base g++ >/dev/null
      apk add --update openssl
      # treat warnings as errors. assuming the Makefile respects enviornment $CFLAGS
      export CXXFLAGS="-Werror"
      # run the build.
      make      